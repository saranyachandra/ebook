/* Source and licensing information for the line(s) below can be found at https://manybooks.net/core/misc/ajax.js. */
function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}else return Array.from(arr)};(function($,window,Drupal,drupalSettings){Drupal.behaviors.AJAX={attach:function attach(context,settings){function loadAjaxBehavior(base){var elementSettings=settings.ajax[base];if(typeof elementSettings.selector==='undefined')elementSettings.selector='#'+base;$(elementSettings.selector).once('drupal-ajax').each(function(){elementSettings.element=this;elementSettings.base=base;Drupal.ajax(elementSettings)})};Object.keys(settings.ajax||{}).forEach(function(base){return loadAjaxBehavior(base)});Drupal.ajax.bindAjaxLinks(document.body);$('.use-ajax-submit').once('ajax').each(function(){var elementSettings={};elementSettings.url=$(this.form).attr('action');elementSettings.setClick=true;elementSettings.event='click';elementSettings.progress={type:'throbber'};elementSettings.base=$(this).attr('id');elementSettings.element=this;Drupal.ajax(elementSettings)})},detach:function detach(context,settings,trigger){if(trigger==='unload')Drupal.ajax.expired().forEach(function(instance){Drupal.ajax.instances[instance.instanceIndex]=null})}};Drupal.AjaxError=function(xmlhttp,uri,customMessage){var statusCode=void(0),statusText=void(0),responseText=void(0);if(xmlhttp.status){statusCode='\n'+Drupal.t('An AJAX HTTP error occurred.')+'\n'+Drupal.t('HTTP Result Code: !status',{'!status':xmlhttp.status})}else statusCode='\n'+Drupal.t('An AJAX HTTP request terminated abnormally.');statusCode+='\n'+Drupal.t('Debugging information follows.');var pathText='\n'+Drupal.t('Path: !uri',{'!uri':uri});statusText='';try{statusText='\n'+Drupal.t('StatusText: !statusText',{'!statusText':$.trim(xmlhttp.statusText)})}catch(e){};responseText='';try{responseText='\n'+Drupal.t('ResponseText: !responseText',{'!responseText':$.trim(xmlhttp.responseText)})}catch(e){};responseText=responseText.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,'');responseText=responseText.replace(/[\n]+\s+/g,'\n');var readyStateText=xmlhttp.status===0?'\n'+Drupal.t('ReadyState: !readyState',{'!readyState':xmlhttp.readyState}):'';customMessage=customMessage?'\n'+Drupal.t('CustomMessage: !customMessage',{'!customMessage':customMessage}):'';this.message=statusCode+pathText+statusText+customMessage+responseText+readyStateText;this.name='AjaxError'};Drupal.AjaxError.prototype=new Error();Drupal.AjaxError.prototype.constructor=Drupal.AjaxError;Drupal.ajax=function(settings){if(arguments.length!==1)throw new Error('Drupal.ajax() function must be called with one configuration object only');var base=settings.base||false,element=settings.element||false;delete settings.base;delete settings.element;if(!settings.progress&&!element)settings.progress=false;var ajax=new Drupal.Ajax(base,element,settings);ajax.instanceIndex=Drupal.ajax.instances.length;Drupal.ajax.instances.push(ajax);return ajax};Drupal.ajax.instances=[];Drupal.ajax.expired=function(){return Drupal.ajax.instances.filter(function(instance){return instance&&instance.element!==false&&!document.body.contains(instance.element)})};Drupal.ajax.bindAjaxLinks=function(element){$(element).find('.use-ajax').once('ajax').each(function(i,ajaxLink){var $linkElement=$(ajaxLink),elementSettings={progress:{type:'throbber'},dialogType:$linkElement.data('dialog-type'),dialog:$linkElement.data('dialog-options'),dialogRenderer:$linkElement.data('dialog-renderer'),base:$linkElement.attr('id'),element:ajaxLink},href=$linkElement.attr('href');if(href){elementSettings.url=href;elementSettings.event='click'};Drupal.ajax(elementSettings)})};Drupal.Ajax=function(base,element,elementSettings){var defaults={event:element?'mousedown':null,keypress:true,selector:base?'#'+base:null,effect:'none',speed:'none',method:'replaceWith',progress:{type:'throbber',message:Drupal.t('Please wait...')},submit:{js:true}};$.extend(this,defaults,elementSettings);this.commands=new Drupal.AjaxCommands();this.instanceIndex=false;if(this.wrapper)this.wrapper='#'+this.wrapper;this.element=element;this.element_settings=elementSettings;this.elementSettings=elementSettings;if(this.element&&this.element.form)this.$form=$(this.element.form);if(!this.url){var $element=$(this.element);if($element.is('a')){this.url=$element.attr('href')}else if(this.element&&element.form)this.url=this.$form.attr('action')};var originalUrl=this.url;this.url=this.url.replace(/\/nojs(\/|$|\?|#)/,'/ajax$1');if(drupalSettings.ajaxTrustedUrl[originalUrl])drupalSettings.ajaxTrustedUrl[this.url]=true;var ajax=this;ajax.options={url:ajax.url,data:ajax.submit,beforeSerialize:function beforeSerialize(elementSettings,options){return ajax.beforeSerialize(elementSettings,options)},beforeSubmit:function beforeSubmit(formValues,elementSettings,options){ajax.ajaxing=true;return ajax.beforeSubmit(formValues,elementSettings,options)},beforeSend:function beforeSend(xmlhttprequest,options){ajax.ajaxing=true;return ajax.beforeSend(xmlhttprequest,options)},success:function success(response,status,xmlhttprequest){if(typeof response==='string')response=$.parseJSON(response);if(response!==null&&!drupalSettings.ajaxTrustedUrl[ajax.url])if(xmlhttprequest.getResponseHeader('X-Drupal-Ajax-Token')!=='1'){var customMessage=Drupal.t('The response failed verification so will not be processed.');return ajax.error(xmlhttprequest,ajax.url,customMessage)};return ajax.success(response,status)},complete:function complete(xmlhttprequest,status){ajax.ajaxing=false;if(status==='error'||status==='parsererror')return ajax.error(xmlhttprequest,ajax.url)},dataType:'json',jsonp:false,type:'POST'};if(elementSettings.dialog)ajax.options.data.dialogOptions=elementSettings.dialog;if(ajax.options.url.indexOf('?')===-1){ajax.options.url+='?'}else ajax.options.url+='&';var wrapper='drupal_'+(elementSettings.dialogType||'ajax');if(elementSettings.dialogRenderer)wrapper+='.'+elementSettings.dialogRenderer;ajax.options.url+=Drupal.ajax.WRAPPER_FORMAT+'='+wrapper;$(ajax.element).on(elementSettings.event,function(event){if(!drupalSettings.ajaxTrustedUrl[ajax.url]&&!Drupal.url.isLocal(ajax.url))throw new Error(Drupal.t('The callback URL is not local and not trusted: !url',{'!url':ajax.url}));return ajax.eventResponse(this,event)});if(elementSettings.keypress)$(ajax.element).on('keypress',function(event){return ajax.keypressResponse(this,event)});if(elementSettings.prevent)$(ajax.element).on(elementSettings.prevent,false)};Drupal.ajax.WRAPPER_FORMAT='_wrapper_format';Drupal.Ajax.AJAX_REQUEST_PARAMETER='_drupal_ajax';Drupal.Ajax.prototype.execute=function(){if(this.ajaxing)return;try{this.beforeSerialize(this.element,this.options);return $.ajax(this.options)}catch(e){this.ajaxing=false;window.alert('An error occurred while attempting to process '+this.options.url+': '+e.message);return $.Deferred().reject()}};Drupal.Ajax.prototype.keypressResponse=function(element,event){var ajax=this;if(event.which===13||event.which===32&&element.type!=='text'&&element.type!=='textarea'&&element.type!=='tel'&&element.type!=='number'){event.preventDefault();event.stopPropagation();$(element).trigger(ajax.elementSettings.event)}};Drupal.Ajax.prototype.eventResponse=function(element,event){event.preventDefault();event.stopPropagation();var ajax=this;if(ajax.ajaxing)return;try{if(ajax.$form){if(ajax.setClick)element.form.clk=element;ajax.$form.ajaxSubmit(ajax.options)}else{ajax.beforeSerialize(ajax.element,ajax.options);$.ajax(ajax.options)}}catch(e){ajax.ajaxing=false;window.alert('An error occurred while attempting to process '+ajax.options.url+': '+e.message)}};Drupal.Ajax.prototype.beforeSerialize=function(element,options){if(this.$form&&document.body.contains(this.$form.get(0))){var settings=this.settings||drupalSettings;Drupal.detachBehaviors(this.$form.get(0),settings,'serialize')};options.data[Drupal.Ajax.AJAX_REQUEST_PARAMETER]=1;var pageState=drupalSettings.ajaxPageState;options.data['ajax_page_state[theme]']=pageState.theme;options.data['ajax_page_state[theme_token]']=pageState.theme_token;options.data['ajax_page_state[libraries]']=pageState.libraries};Drupal.Ajax.prototype.beforeSubmit=function(formValues,element,options){};Drupal.Ajax.prototype.beforeSend=function(xmlhttprequest,options){if(this.$form){options.extraData=options.extraData||{};options.extraData.ajax_iframe_upload='1';var v=$.fieldValue(this.element);if(v!==null)options.extraData[this.element.name]=v};$(this.element).prop('disabled',true);if(!this.progress||!this.progress.type)return;var progressIndicatorMethod='setProgressIndicator'+this.progress.type.slice(0,1).toUpperCase()+this.progress.type.slice(1).toLowerCase();if(progressIndicatorMethod in this&&typeof this[progressIndicatorMethod]==='function')this[progressIndicatorMethod].call(this)};Drupal.theme.ajaxProgressThrobber=function(message){var messageMarkup=typeof message==='string'?Drupal.theme('ajaxProgressMessage',message):'',throbber='<div class="throbber">&nbsp;</div>';return'<div class="ajax-progress ajax-progress-throbber">'+throbber+messageMarkup+'</div>'};Drupal.theme.ajaxProgressIndicatorFullscreen=function(){return'<div class="ajax-progress ajax-progress-fullscreen">&nbsp;</div>'};Drupal.theme.ajaxProgressMessage=function(message){return'<div class="message">'+message+'</div>'};Drupal.theme.ajaxProgressBar=function($element){return $('<div class="ajax-progress ajax-progress-bar"></div>').append($element)};Drupal.Ajax.prototype.setProgressIndicatorBar=function(){var progressBar=new Drupal.ProgressBar('ajax-progress-'+this.element.id,$.noop,this.progress.method,$.noop);if(this.progress.message)progressBar.setProgress(-1,this.progress.message);if(this.progress.url)progressBar.startMonitoring(this.progress.url,this.progress.interval||1500);this.progress.element=$(Drupal.theme('ajaxProgressBar',progressBar.element));this.progress.object=progressBar;$(this.element).after(this.progress.element)};Drupal.Ajax.prototype.setProgressIndicatorThrobber=function(){this.progress.element=$(Drupal.theme('ajaxProgressThrobber',this.progress.message));$(this.element).after(this.progress.element)};Drupal.Ajax.prototype.setProgressIndicatorFullscreen=function(){this.progress.element=$(Drupal.theme('ajaxProgressIndicatorFullscreen'));$('body').append(this.progress.element)};Drupal.Ajax.prototype.success=function(response,status){var _this=this;if(this.progress.element)$(this.progress.element).remove();if(this.progress.object)this.progress.object.stopMonitoring();$(this.element).prop('disabled',false);var elementParents=$(this.element).parents('[data-drupal-selector]').addBack().toArray(),focusChanged=false;Object.keys(response||{}).forEach(function(i){if(response[i].command&&_this.commands[response[i].command]){_this.commands[response[i].command](_this,response[i],status);if(response[i].command==='invoke'&&response[i].method==='focus')focusChanged=true}});if(!focusChanged&&this.element&&!$(this.element).data('disable-refocus')){var target=false;for(var n=elementParents.length-1;!target&&n>=0;n--)target=document.querySelector('[data-drupal-selector="'+elementParents[n].getAttribute('data-drupal-selector')+'"]');if(target)$(target).trigger('focus')};if(this.$form&&document.body.contains(this.$form.get(0))){var settings=this.settings||drupalSettings;Drupal.attachBehaviors(this.$form.get(0),settings)};this.settings=null};Drupal.Ajax.prototype.getEffect=function(response){var type=response.effect||this.effect,speed=response.speed||this.speed,effect={};if(type==='none'){effect.showEffect='show';effect.hideEffect='hide';effect.showSpeed=''}else if(type==='fade'){effect.showEffect='fadeIn';effect.hideEffect='fadeOut';effect.showSpeed=speed}else{effect.showEffect=type+'Toggle';effect.hideEffect=type+'Toggle';effect.showSpeed=speed};return effect};Drupal.Ajax.prototype.error=function(xmlhttprequest,uri,customMessage){if(this.progress.element)$(this.progress.element).remove();if(this.progress.object)this.progress.object.stopMonitoring();$(this.wrapper).show();$(this.element).prop('disabled',false);if(this.$form&&document.body.contains(this.$form.get(0))){var settings=this.settings||drupalSettings;Drupal.attachBehaviors(this.$form.get(0),settings)};throw new Drupal.AjaxError(xmlhttprequest,uri,customMessage)};Drupal.theme.ajaxWrapperNewContent=function($newContent,ajax,response){return(response.effect||ajax.effect)!=='none'&&$newContent.filter(function(i){return!($newContent[i].nodeName==='#comment'||$newContent[i].nodeName==='#text'&&/^(\s|\n|\r)*$/.test($newContent[i].textContent))}).length>1?Drupal.theme('ajaxWrapperMultipleRootElements',$newContent):$newContent};Drupal.theme.ajaxWrapperMultipleRootElements=function($elements){return $('<div></div>').append($elements)};Drupal.AjaxCommands=function(){};Drupal.AjaxCommands.prototype={insert:function insert(ajax,response){var $wrapper=response.selector?$(response.selector):$(ajax.wrapper),method=response.method||ajax.method,effect=ajax.getEffect(response),settings=response.settings||ajax.settings||drupalSettings,$newContent=$($.parseHTML(response.data,document,true));$newContent=Drupal.theme('ajaxWrapperNewContent',$newContent,ajax,response);switch(method){case'html':case'replaceWith':case'replaceAll':case'empty':case'remove':Drupal.detachBehaviors($wrapper.get(0),settings);break;default:break};$wrapper[method]($newContent);if(effect.showEffect!=='show')$newContent.hide();var $ajaxNewContent=$newContent.find('.ajax-new-content');if($ajaxNewContent.length){$ajaxNewContent.hide();$newContent.show();$ajaxNewContent[effect.showEffect](effect.showSpeed)}else if(effect.showEffect!=='show')$newContent[effect.showEffect](effect.showSpeed);if($newContent.parents('html').length)$newContent.each(function(index,element){if(element.nodeType===Node.ELEMENT_NODE)Drupal.attachBehaviors(element,settings)})},remove:function remove(ajax,response,status){var settings=response.settings||ajax.settings||drupalSettings;$(response.selector).each(function(){Drupal.detachBehaviors(this,settings)}).remove()},changed:function changed(ajax,response,status){var $element=$(response.selector);if(!$element.hasClass('ajax-changed')){$element.addClass('ajax-changed');if(response.asterisk)$element.find(response.asterisk).append(' <abbr class="ajax-changed" title="'+Drupal.t('Changed')+'">*</abbr> ')}},alert:function alert(ajax,response,status){window.alert(response.text,response.title)},announce:function announce(ajax,response){if(response.priority){Drupal.announce(response.text,response.priority)}else Drupal.announce(response.text)},redirect:function redirect(ajax,response,status){window.location=response.url},css:function css(ajax,response,status){$(response.selector).css(response.argument)},settings:function settings(ajax,response,status){var ajaxSettings=drupalSettings.ajax;if(ajaxSettings)Drupal.ajax.expired().forEach(function(instance){if(instance.selector){var selector=instance.selector.replace('#','');if(selector in ajaxSettings)delete ajaxSettings[selector]}});if(response.merge){$.extend(true,drupalSettings,response.settings)}else ajax.settings=response.settings},data:function data(ajax,response,status){$(response.selector).data(response.name,response.value)},invoke:function invoke(ajax,response,status){var $element=$(response.selector);$element[response.method].apply($element,_toConsumableArray(response.args))},restripe:function restripe(ajax,response,status){$(response.selector).find('> tbody > tr:visible, > tr:visible').removeClass('odd even').filter(':even').addClass('odd').end().filter(':odd').addClass('even')},update_build_id:function update_build_id(ajax,response,status){$('input[name="form_build_id"][value="'+response.old+'"]').val(response.new)},add_css:function add_css(ajax,response,status){$('head').prepend(response.data)},message:function message(ajax,response){var messages=new Drupal.Message(document.querySelector(response.messageWrapperQuerySelector));if(response.clearPrevious)messages.clear();messages.add(response.message,response.messageOptions)}}})(jQuery,window,Drupal,drupalSettings)
/* Source and licensing information for the above line(s) can be found at https://manybooks.net/core/misc/ajax.js. */;
/* Source and licensing information for the line(s) below can be found at https://manybooks.net/themes/contrib/bootstrap/js/misc/ajax.js. */
(function($,window,Drupal,drupalSettings){Drupal.Ajax.prototype.findGlyphicon=function(element){return $(element).closest('.form-item').find('.ajax-progress.glyphicon')};Drupal.Ajax.prototype.glyphiconStart=function(element,message){var $glyphicon=this.findGlyphicon(element);if($glyphicon[0]){$glyphicon.addClass('glyphicon-spin');if($.fn.tooltip&&drupalSettings.bootstrap.tooltip_enabled){$glyphicon.removeAttr('data-toggle').removeAttr('data-original-title').removeAttr('title').tooltip('destroy');if(message)$glyphicon.attr('data-toggle','tooltip').attr('title',message).tooltip()};if(message)$glyphicon.parent().append('<div class="sr-only message">'+message+'</div>')};return $glyphicon};Drupal.Ajax.prototype.glyphiconStop=function(element){var $glyphicon=this.findGlyphicon(element);if($glyphicon[0]){$glyphicon.removeClass('glyphicon-spin');if($.fn.tooltip&&drupalSettings.bootstrap.tooltip_enabled)$glyphicon.removeAttr('data-toggle').removeAttr('data-original-title').removeAttr('title').tooltip('destroy')}};Drupal.Ajax.prototype.setProgressIndicatorThrobber=function(){var $element=$(this.element),$glyphicon=this.glyphiconStart($element,this.progress.message);if($glyphicon[0]){this.progress.element=$glyphicon.parent();this.progress.glyphicon=true;return};if(!this.progress.element)this.progress.element=$(Drupal.theme('ajaxThrobber'));if(this.progress.message)this.progress.element.after('<div class="message">'+this.progress.message+'</div>');if($element.is('input')){$element.after(this.progress.element)}else $element.append(this.progress.element)};var success=Drupal.Ajax.prototype.success;Drupal.Ajax.prototype.success=function(response,status){if(this.progress.element){if(this.progress.glyphicon){this.glyphiconStop(this.progress.element)}else this.progress.element.remove();this.progress.element.parent().find('.message').remove()};return success.apply(this,[response,status])}})(jQuery,this,Drupal,drupalSettings)
/* Source and licensing information for the above line(s) can be found at https://manybooks.net/themes/contrib/bootstrap/js/misc/ajax.js. */;
/* Source and licensing information for the line(s) below can be found at https://manybooks.net/core/modules/views/js/base.js. */
(function($,Drupal,drupalSettings){Drupal.Views={};Drupal.Views.parseQueryString=function(query){var args={},pos=query.indexOf('?');if(pos!==-1)query=query.substring(pos+1);var pair=void(0),pairs=query.split('&');for(var i=0;i<pairs.length;i++){pair=pairs[i].split('=');if(pair[0]!=='q'&&pair[1])args[decodeURIComponent(pair[0].replace(/\+/g,' '))]=decodeURIComponent(pair[1].replace(/\+/g,' '))};return args};Drupal.Views.parseViewArgs=function(href,viewPath){var returnObj={},path=Drupal.Views.getPath(href),viewHref=Drupal.url(viewPath).substring(drupalSettings.path.baseUrl.length);if(viewHref&&path.substring(0,viewHref.length+1)===viewHref+'/'){returnObj.view_args=decodeURIComponent(path.substring(viewHref.length+1,path.length));returnObj.view_path=path};return returnObj};Drupal.Views.pathPortion=function(href){var protocol=window.location.protocol;if(href.substring(0,protocol.length)===protocol)href=href.substring(href.indexOf('/',protocol.length+2));return href};Drupal.Views.getPath=function(href){href=Drupal.Views.pathPortion(href);href=href.substring(drupalSettings.path.baseUrl.length,href.length);if(href.substring(0,3)==='?q=')href=href.substring(3,href.length);var chars=['#','?','&'];for(var i=0;i<chars.length;i++)if(href.indexOf(chars[i])>-1)href=href.substr(0,href.indexOf(chars[i]));return href}})(jQuery,Drupal,drupalSettings)
/* Source and licensing information for the above line(s) can be found at https://manybooks.net/core/modules/views/js/base.js. */;
/* Source and licensing information for the line(s) below can be found at https://manybooks.net/core/modules/views/js/ajax_view.js. */
(function($,Drupal,drupalSettings){Drupal.behaviors.ViewsAjaxView={};Drupal.behaviors.ViewsAjaxView.attach=function(context,settings){if(settings&&settings.views&&settings.views.ajaxViews){var ajaxViews=settings.views.ajaxViews;Object.keys(ajaxViews||{}).forEach(function(i){Drupal.views.instances[i]=new Drupal.views.ajaxView(ajaxViews[i])})}};Drupal.behaviors.ViewsAjaxView.detach=function(context,settings,trigger){if(trigger==='unload')if(settings&&settings.views&&settings.views.ajaxViews){var ajaxViews=settings.views.ajaxViews;Object.keys(ajaxViews||{}).forEach(function(i){var selector='.js-view-dom-id-'+ajaxViews[i].view_dom_id;if($(selector,context).length){delete Drupal.views.instances[i];delete settings.views.ajaxViews[i]}})}};Drupal.views={};Drupal.views.instances={};Drupal.views.ajaxView=function(settings){var selector='.js-view-dom-id-'+settings.view_dom_id;this.$view=$(selector);var ajaxPath=drupalSettings.views.ajax_path;if(ajaxPath.constructor.toString().indexOf('Array')!==-1)ajaxPath=ajaxPath[0];var queryString=window.location.search||'';if(queryString!==''){queryString=queryString.slice(1).replace(/q=[^&]+&?|&?render=[^&]+/,'');if(queryString!=='')queryString=(/\?/.test(ajaxPath)?'&':'?')+queryString};this.element_settings={url:ajaxPath+queryString,submit:settings,setClick:true,event:'click',selector:selector,progress:{type:'fullscreen'}};this.settings=settings;this.$exposed_form=$('form#views-exposed-form-'+settings.view_name.replace(/_/g,'-')+'-'+settings.view_display_id.replace(/_/g,'-'));this.$exposed_form.once('exposed-form').each($.proxy(this.attachExposedFormAjax,this));this.$view.filter($.proxy(this.filterNestedViews,this)).once('ajax-pager').each($.proxy(this.attachPagerAjax,this));var selfSettings=$.extend({},this.element_settings,{event:'RefreshView',base:this.selector,element:this.$view.get(0)});this.refreshViewAjax=Drupal.ajax(selfSettings)};Drupal.views.ajaxView.prototype.attachExposedFormAjax=function(){var that=this;this.exposedFormAjax=[];$('input[type=submit], input[type=image]',this.$exposed_form).not('[data-drupal-selector=edit-reset]').each(function(index){var selfSettings=$.extend({},that.element_settings,{base:$(this).attr('id'),element:this});that.exposedFormAjax[index]=Drupal.ajax(selfSettings)})};Drupal.views.ajaxView.prototype.filterNestedViews=function(){return!this.$view.parents('.view').length};Drupal.views.ajaxView.prototype.attachPagerAjax=function(){this.$view.find('ul.js-pager__items > li > a, th.views-field a, .attachment .views-summary a').each($.proxy(this.attachPagerLinkAjax,this))};Drupal.views.ajaxView.prototype.attachPagerLinkAjax=function(id,link){var $link=$(link),viewData={},href=$link.attr('href');$.extend(viewData,this.settings,Drupal.Views.parseQueryString(href),Drupal.Views.parseViewArgs(href,this.settings.view_base_path));var selfSettings=$.extend({},this.element_settings,{submit:viewData,base:false,element:link});this.pagerAjax=Drupal.ajax(selfSettings)};Drupal.AjaxCommands.prototype.viewsScrollTop=function(ajax,response){var offset=$(response.selector).offset(),scrollTarget=response.selector;while($(scrollTarget).scrollTop()===0&&$(scrollTarget).parent())scrollTarget=$(scrollTarget).parent();if(offset.top-10<$(scrollTarget).scrollTop())$(scrollTarget).animate({scrollTop:offset.top-10},500)}})(jQuery,Drupal,drupalSettings)
/* Source and licensing information for the above line(s) can be found at https://manybooks.net/core/modules/views/js/ajax_view.js. */;
/* Source and licensing information for the line(s) below can be found at https://manybooks.net/themes/contrib/bootstrap/js/modules/views/ajax_view.js. */
(function($,Drupal){'use strict';Drupal.views.ajaxView.prototype.attachExposedFormAjax=function(){var that=this;this.exposedFormAjax=[];$('button[type=submit], input[type=submit], input[type=image]',this.$exposed_form).not('[data-drupal-selector=edit-reset]').each(function(index){var self_settings=$.extend({},that.element_settings,{base:$(this).attr('id'),element:this});that.exposedFormAjax[index]=Drupal.ajax(self_settings)})}})(jQuery,Drupal)
/* Source and licensing information for the above line(s) can be found at https://manybooks.net/themes/contrib/bootstrap/js/modules/views/ajax_view.js. */;
/* Source and licensing information for the line(s) below can be found at https://manybooks.net/modules/custom/mnybks_user/js/page_leave_popup.js. */
/**
 * @file
 * PageLeavePopup.
 */

(function ($) {
  /**
   * Attaches the Page leave behavior to search pages.
   *
   * Opens newsletter subscription popup when cursor leaves page on the top
   * edge (exit-intent behaviour).
   */
  Drupal.behaviors.mnybksUserPageLeavePopup = {
    getCookie: function (cname) {
      let name = cname + "=";
      let decodedCookie = decodeURIComponent(document.cookie);
      let ca = decodedCookie.split(';');
      for (let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    },
    attach: function (context, settings) {
      let mouseY = 0;
      if (this.getCookie('mnybks_user_subscribe_popup_opened') == false) {
        $(document).on("mousemove", function (e) {
          mouseY = e.clientY;
          $(document).mouseleave(function () {
            if (mouseY < 50) {
              let $modalOpened = $('#drupal-modal');
              if ($modalOpened.css('display') === 'none' || typeof $modalOpened.css('display') === 'undefined') {
                // Set cookie for a month when popup is opened.
                var d = new Date();
                d.setTime(d.getTime() + (30 * 24 * 60 * 60 * 1000));
                var expires = "expires=" + d.toUTCString();
                document.cookie = 'mnybks_user_subscribe_popup_opened=1;' + expires + ";path=/";
                $('.newsletter-subscribe', context).trigger('click');
                $('.newsletter-subscribe', context).unbind('click');
              }
            }
          });
        })
      }
      $('.mb-newsletter-close').on("click", function () {
        $('body').removeClass('modal-open').css('padding-right','0');
        $('#drupal-modal').remove();
        $('.modal-backdrop').remove();
      });
    }
  }
})(jQuery);

/* Source and licensing information for the above line(s) can be found at https://manybooks.net/modules/custom/mnybks_user/js/page_leave_popup.js. */;
/* Source and licensing information for the line(s) below can be found at https://manybooks.net/core/modules/comment/js/comment-by-viewer.js. */
(function($,Drupal,drupalSettings){Drupal.behaviors.commentByViewer={attach:function attach(context){var currentUserID=parseInt(drupalSettings.user.uid,10);$('[data-comment-user-id]').filter(function(){return parseInt(this.getAttribute('data-comment-user-id'),10)===currentUserID}).addClass('by-viewer')}}})(jQuery,Drupal,drupalSettings)
/* Source and licensing information for the above line(s) can be found at https://manybooks.net/core/modules/comment/js/comment-by-viewer.js. */;
/* Source and licensing information for the line(s) below can be found at https://manybooks.net/modules/custom/mnybks_comment/js/mnybks_comment_links.js. */
(function($){Drupal.behaviors.mnybksCommentLinks={attach:function(context,settings){$('.comment-vote-links').once('mnybksCommentLinks',context).each(function(){var $parent=$(this);$(this).find('.mb-comment-link').on('click',function(e){e.preventDefault();var url=$(this).attr("href");$.ajax({url:url,dataType:'json',success:function(e){$parent.html(e.data);Drupal.attachBehaviors(document,drupalSettings)}});$(this).off('click')})})}}})(jQuery)
/* Source and licensing information for the above line(s) can be found at https://manybooks.net/modules/custom/mnybks_comment/js/mnybks_comment_links.js. */;
