(function($,Drupal,drupalSettings){Drupal.behaviors.mnybksBookHover={updateCursorCoordinates:function(event){return{pgX:event.pageX,pgY:event.pageY,clX:event.clientX,clY:event.clientY,}},attach:function(context,settings){let self=this;if($(window).width()>1199){let delay=800,setTimeoutConst,cursorCoord;let popupEnabled=true;$('article.book',context).each(function(){let $article=$(this);$article.click(function(){popupEnabled=false;}).mousemove(function(e){cursorCoord=self.updateCursorCoordinates(e);}).hover(function(event){cursorCoord=self.updateCursorCoordinates(event);setTimeoutConst=setTimeout(function(){if(popupEnabled){let $hoverBlock=$article.find('.book-hover').clone();$hoverBlock.addClass('active');let popupWidth=350;let popupHeight=260;$hoverBlock.width(popupWidth);$hoverBlock.height(popupHeight);if(cursorCoord.clX+$hoverBlock.width()/2>$(window).width()){let diffX=(cursorCoord.clX+$hoverBlock.width()/2)-$(window).width();cursorCoord.pgX-=diffX;}
if(cursorCoord.clX-$hoverBlock.width()/2<0){cursorCoord.pgX+=($hoverBlock.width()/2-cursorCoord.clX);}
if(cursorCoord.clY+$hoverBlock.height()/2>$(window).height()){let diffY=(cursorCoord.clY+$hoverBlock.height()/2)-$(window).height();cursorCoord.pgY-=diffY;}
if(cursorCoord.clY-$hoverBlock.height()/2<0){cursorCoord.pgY+=($hoverBlock.height()/2-cursorCoord.clY);}
$hoverBlock.css('top',cursorCoord.pgY-$hoverBlock.height()/2+"px");$hoverBlock.css('left',cursorCoord.pgX-$hoverBlock.width()/2+"px");$hoverBlock.mouseleave(function(){$(this).remove();});if(settings.user.uid!==0){let nodeId=$hoverBlock.find('.book-hover-download').attr('data-node-id');$hoverBlock.find('.book-hover-download').attr('href',settings.bookHover.baseUrl+'/book-files/'+nodeId);}
$hoverBlock.appendTo($('body'));Drupal.attachBehaviors($hoverBlock);$(this).unbind("mousemove");}},delay);},function(){clearTimeout(setTimeoutConst);})})}}}})(jQuery,Drupal,drupalSettings);;